{% comment %} Tabla de contratos para reportes generales {% endcomment %}
<div class="table-responsive">
    <table class="table table-hover align-middle">
        <thead>
            <tr>
                <th>NÃºmero</th>
                <th>Inmueble</th>
                <th>Inquilino</th>
                <th>Estado</th>
                <th>Inicio</th>
                <th>Fin</th>
                <th class="text-end">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for c in contratos %}
            <tr>
                <td>{{ c.numero_contrato }}</td>
                <td>{{ c.inmueble.titulo }}</td>
                <td>{{ c.inquilino.get_full_name }}</td>
                <td>
                    {% if c.estado == 'activo' %}
                    <span class="badge bg-success">{{ c.get_estado_display }}</span>
                    {% elif c.estado == 'pendiente_firma' %}
                    <span class="badge bg-warning text-dark">{{ c.get_estado_display }}</span>
                    {% elif c.estado == 'borrador' %}
                    <span class="badge bg-secondary">{{ c.get_estado_display }}</span>
                    {% elif c.estado == 'vencido' %}
                    <span class="badge bg-danger">{{ c.get_estado_display }}</span>
                    {% else %}
                    <span class="badge bg-dark">{{ c.get_estado_display }}</span>
                    {% endif %}
                </td>
                <td>{{ c.fecha_inicio|date:'d/m/Y' }}</td>
                <td>{{ c.fecha_fin|date:'d/m/Y' }}</td>
                <td class="text-end">
                    <div class="btn-group">
                        <a href="{% url 'contratos:detalle' c.id %}" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-eye"></i> Ver
                        </a>
                        {% if c.estado == 'activo' %}
                        <a href="{% url 'contratos:vencer' c.id %}" class="btn btn-sm btn-outline-danger">
                            <i class="fas fa-flag"></i> Vencer
                        </a>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="7" class="text-center text-muted">No hay contratos registrados</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
